---
title: Thinking Process
description: Composed thinking step with status, content blocks, and sub-steps
author: AF
---

<ComponentPreview
  name="thinking-process-demo"
  description="Thinking process with multiple states"
  className="mb-4"
/>

Thinking Process 是一个**单个思考步骤块**的组合组件，适合展示 AI 思考/任务执行的状态与内容，并支持“文字 + 子步骤”混合渲染。

## Installation

<CodeTabs>

<TabsList>
  <TabsTrigger value="cli">CLI</TabsTrigger>
  <TabsTrigger value="manual">Manual</TabsTrigger>
</TabsList>

<TabsContent value="cli">

```bash
npx shadcn@latest add http://localhost:3000/r/wuhan/thinking-process.json
```

</TabsContent>

<TabsContent value="manual">

<Steps>

<Step>Copy and paste the following code into your project.</Step>

<ComponentSource
  name="thinking-process"
  title="registry/wuhan/composed/thinking-process/thinking-process.tsx"
/>

<Step>Update the import paths to match your project setup.</Step>

</Steps>

</TabsContent>

</CodeTabs>

## Overview

- **定位**：展示单个思考步骤（状态、标题、可折叠内容）
- **组合方式**：通过 `contentBlocks` 可穿插文字与子步骤
- **适用范围**：开箱即用；若需深度布局/交互定制，使用 primitives

## Usage

### 基础用法

```tsx
import { ThinkingStep } from "@/registry/wuhan/composed/thinking-process/thinking-process";

export function Example() {
  return (
    <ThinkingStep
      status="completed"
      title="思考完成"
      duration={14}
      content="分析完成，已生成详细方案。"
      defaultOpen
    />
  );
}
```

### 内容块（推荐）

```tsx
import { ThinkingStep } from "@/registry/wuhan/composed/thinking-process/thinking-process";

const steps = [
  { status: "success", title: "子步骤 1", items: [{ content: "已完成" }] },
  { status: "loading", title: "子步骤 2", items: [{}] },
];

<ThinkingStep
  status="completed"
  title="分析完成"
  contentBlocks={[
    { type: "text", key: "intro", content: "下面是关键子步骤：" },
    { type: "subSteps", key: "steps", steps },
    { type: "text", key: "outro", content: "步骤完成后将生成结论。" },
  ]}
  defaultOpen
/>;
```

### 长耗时提示

```tsx
<ThinkingStep status="thinking" title="搜索中..." longRunning />
```

### 自定义文案

```tsx
<ThinkingStep
  status="completed"
  title="思考完成"
  labels={{
    longRunningHint: "任务需要一段时间，可稍后查看",
    toolsUsed: (count) => `调用了 ${count} 个工具`,
    cancelledStepTitle: "已终止",
  }}
/>;
```

## API (Composed)

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `status` | `'pending' \| 'thinking' \| 'completed' \| 'cancelled'` | `'pending'` | 步骤状态 |
| `title` | `React.ReactNode` | - | 步骤标题 |
| `content` | `React.ReactNode` | - | 步骤内容 |
| `contentBlocks` | `ThinkingStepContentBlock[]` | - | 文字/子步骤/自定义节点穿插 |
| `subSteps` | `unknown[]` | - | 子步骤数据（需配合 `renderSubSteps`） |
| `renderSubSteps` | `(subSteps) => ReactNode` | - | 子步骤渲染器 |
| `duration` | `number` | - | 耗时（秒） |
| `icon` | `React.ReactNode` | - | 自定义图标 |
| `arrowIcon` | `React.ReactNode` | - | 自定义箭头 |
| `hint` | `React.ReactNode` | - | 长耗时提示文案 |
| `longRunning` | `boolean` | `false` | 长耗时场景默认收起 |
| `labels` | `ThinkingStepLabels` | - | 文案与统计配置 |
| `defaultOpen` | `boolean` | `false` | 默认展开 |
| `open` | `boolean` | - | 受控展开 |
| `onOpenChange` | `(open) => void` | - | 展开变化回调 |

## Behavior Notes

- `contentBlocks` 存在时忽略 `content / subSteps / renderSubSteps`
- `status="cancelled"` 会自动追加一个“已取消”子步骤
- 工具统计仅对 `contentBlocks.subSteps` 自动生效

## Examples

### Default

<ComponentPreview
  name="thinking-process-default"
  description="Completed state with duration"
  className="mb-4"
/>

### Content Blocks

<ComponentPreview
  name="thinking-process-custom"
  description="Text + sub-steps + text"
  className="mb-4"
/>

### Long Running

<ComponentPreview
  name="thinking-process-with-hint"
  description="Long running hint behavior"
  className="mb-4"
/>

### Status & Labels

<ComponentPreview
  name="thinking-process-demo"
  description="Multiple states and label customization"
  className="mb-4"
/>

## Primitives (Advanced)

需要高度定制时使用 primitives：

```tsx
import {
  ThinkingStepPrimitive,
  ThinkingStepHeaderPrimitive,
  ThinkingStepContentPrimitive,
  ThinkingStatusLabelPrimitive,
  ThinkingIconContainerPrimitive,
  ThinkingTimeLabelPrimitive,
  ThinkingCollapseArrowPrimitive,
} from "@/registry/wuhan/blocks/thinking-process/thinking-process-01";
```

```bash
npx shadcn@latest add http://localhost:3000/r/wuhan/thinking-process-01.json
```

## Design Tokens

组件只消费全局 token（如 `--text-* / --bg-* / --gap-* / --radius-*`）。

