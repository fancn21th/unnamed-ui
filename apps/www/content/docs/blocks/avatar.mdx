---
title: Avatar
description: 头像组件，用于展示用户或实体的图片、文本或图标
author: AF
---

<ComponentPreview name="avatar-demo" description="Avatar 头像组件演示" className="mb-4" />

Avatar 头像组件用于展示用户、团队或实体的视觉标识，支持图片、文本、图标等多种展示形式，适用于用户列表、评论区、聊天界面等场景。

## 概述

- **多种展示形式**：支持图片、文本、图标三种展示方式
- **灵活的尺寸**：提供 sm、md、lg 三种预设尺寸
- **自定义样式**：支持自定义背景色、文字颜色等样式
- **头像组**：支持多个头像的组合展示，带重叠效果
- **头像标题**：支持展示名称和时间信息
- **类型安全**：完整的 TypeScript 类型定义

## 快速开始

```tsx
import { Avatar, AvatarGroup, AvatarHeader } from "@/registry/wuhan/composed/avatar/avatar";

export function Example() {
  return <Avatar src="https://example.com/avatar.jpg" />;
}
```

## 特性

- **图片头像**：支持传入 src 属性显示图片
- **文本头像**：支持传入文本作为 children 显示
- **图标头像**：支持传入图标组件显示
- **优先级渲染**：src > icon > children 的渲染优先级
- **图片加载失败**：自动降级到文本或图标
- **头像组合**：AvatarGroup 支持多个头像重叠显示
- **数量限制**：AvatarGroup 支持 maxCount 限制显示数量
- **头像标题**：AvatarHeader 支持展示名称和时间

## 安装

<CodeTabs>

<TabsList>
  <TabsTrigger value="cli">CLI</TabsTrigger>
  <TabsTrigger value="manual">Manual</TabsTrigger>
</TabsList>

<TabsContent value="cli">

```bash
npx shadcn@latest add "http://localhost:3000/r/wuhan/avatar.json"
```

</TabsContent>

<TabsContent value="manual">

<Steps>

<Step>复制以下代码到你的项目</Step>

<ComponentSource name="avatar" />

<Step>更新导入路径以匹配你的项目设置</Step>

</Steps>

</TabsContent>

</CodeTabs>

## 代码演示

### 基础用法

演示图片头像、文本头像和自定义背景色。

<ComponentPreview
  name="avatar-default"
  description="基础用法"
  className="mb-4"
/>

### 综合演示

展示图片、文本、图标和不同尺寸的头像。

<ComponentPreview
  name="avatar-demo"
  description="综合演示"
  className="mb-4"
/>

### 文本头像

使用文本作为头像内容，支持自定义背景色和文字颜色。

<ComponentPreview
  name="avatar-text"
  description="文本头像"
  className="mb-4"
/>

### 图标头像

使用图标作为头像内容。

<ComponentPreview
  name="avatar-icon"
  description="图标头像"
  className="mb-4"
/>

### 不同尺寸

提供 sm、md、lg 三种尺寸。

<ComponentPreview
  name="avatar-sizes"
  description="不同尺寸"
  className="mb-4"
/>

### 头像组

多个头像组合展示，支持重叠效果和数量限制。

<ComponentPreview
  name="avatar-group-demo"
  description="头像组"
  className="mb-4"
/>

### 带名称和时间

展示带有名称和时间信息的头像。

<ComponentPreview
  name="avatar-header-demo"
  description="带名称和时间"
  className="mb-4"
/>

## API

### Avatar

头像组件的主要 API。

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| `src` | `string` | - | 图片地址 |
| `alt` | `string` | `"avatar"` | 图片替代文本 |
| `children` | `ReactNode` | - | 文本内容，当没有 src 或图片加载失败时显示 |
| `icon` | `ReactNode` | - | 图标内容 |
| `size` | `"sm" \| "md" \| "lg"` | `"md"` | 头像尺寸 |
| `style` | `CSSProperties` | - | 自定义样式（可用于设置背景色等） |
| `className` | `string` | - | 自定义类名 |

### AvatarGroup

头像组组件，用于展示多个头像。

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| `children` | `ReactNode` | - | Avatar 组件列表 |
| `maxCount` | `number` | - | 最大显示数量，超出部分显示 +N |
| `spacing` | `number` | `-8` | 头像间距（负值产生重叠效果） |
| `className` | `string` | - | 自定义类名 |

### AvatarHeader

带名称和时间的头像组件。

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| `avatar` | `AvatarProps` | - | Avatar 组件的 props |
| `avatarRender` | `ReactNode` | - | 自定义头像渲染内容 |
| `name` | `ReactNode` | - | 名称 |
| `time` | `ReactNode` | - | 时间信息 |
| `nameStyle` | `CSSProperties` | - | 名称样式 |
| `timeStyle` | `CSSProperties` | - | 时间样式 |
| `className` | `string` | - | 自定义类名 |

## 使用场景

### 1. 用户列表

```tsx
<div className="space-y-3">
  <AvatarHeader
    avatar={{ src: "https://example.com/user1.jpg" }}
    name="张三"
    time="在线"
  />
  <AvatarHeader
    avatar={{ src: "https://example.com/user2.jpg" }}
    name="李四"
    time="2小时前"
  />
</div>
```

### 2. 评论区

```tsx
<AvatarHeader
  avatar={{ 
    children: "王",
    style: { backgroundColor: '#1677ff', color: 'white' }
  }}
  name="王五"
  time="刚刚"
/>
```

### 3. 团队成员

```tsx
<AvatarGroup maxCount={5}>
  <Avatar src="https://example.com/member1.jpg" />
  <Avatar src="https://example.com/member2.jpg" />
  <Avatar src="https://example.com/member3.jpg" />
  {/* 更多成员... */}
</AvatarGroup>
```

### 4. 聊天列表

```tsx
<AvatarHeader
  avatar={{ 
    icon: <User className="h-4 w-4" />,
    style: { backgroundColor: '#87d068' }
  }}
  name="客服小智"
  time="5分钟前"
/>
```

## 设计指南

### 尺寸选择

- **sm (24px)**：适用于紧凑的列表、标签等场景
- **md (32px)**：默认尺寸，适用于大多数场景
- **lg (40px)**：适用于强调用户信息的场景

### 内容优先级

Avatar 组件按以下优先级渲染内容：

1. **图片 (src)**：优先显示图片
2. **图标 (icon)**：当没有图片或图片加载失败时显示图标
3. **文本 (children)**：当没有图片和图标时显示文本

### 颜色使用

- 使用 `style` 属性自定义背景色
- 文本头像建议使用品牌色或区分性强的颜色
- 确保文字与背景色有足够的对比度

### 头像组使用

- 默认间距 `-8px` 产生适度的重叠效果
- 使用 `maxCount` 避免显示过多头像
- 超出数量用 `+N` 标识

## 可访问性

- 图片头像默认提供 `alt="avatar"` 属性
- 支持自定义 `alt` 属性提升可访问性
- 文本头像使用语义化的 HTML 结构
- 支持键盘导航和屏幕阅读器

## 常见问题

### 1. 如何处理图片加载失败？

Avatar 组件会自动处理图片加载失败的情况。如果提供了 `icon` 或 `children`，会自动降级显示。

```tsx
<Avatar 
  src="invalid-url.jpg"
  icon={<User />}
>
  A
</Avatar>
```

### 2. 如何自定义文本头像的样式？

使用 `style` 属性自定义背景色和文字颜色：

```tsx
<Avatar style={{ backgroundColor: '#1677ff', color: 'white' }}>
  张
</Avatar>
```

### 3. AvatarGroup 如何控制重叠程度？

使用 `spacing` 属性控制头像间距，负值产生重叠效果：

```tsx
<AvatarGroup spacing={-12}>
  {/* 重叠更多 */}
</AvatarGroup>

<AvatarGroup spacing={-4}>
  {/* 重叠较少 */}
</AvatarGroup>
```

### 4. AvatarHeader 如何自定义头像？

可以使用 `avatar` 属性传递 Avatar 的 props，或使用 `avatarRender` 完全自定义：

```tsx
{/* 方式1: 传递 props */}
<AvatarHeader
  avatar={{ 
    src: "...",
    size: "lg"
  }}
  name="张三"
/>

{/* 方式2: 完全自定义 */}
<AvatarHeader
  avatarRender={<CustomAvatar />}
  name="张三"
/>
```

## 原语组件

Avatar 组件基于以下原语组件构建：

- `AvatarPrimitive`: 头像容器组件
- `AvatarImagePrimitive`: 图片组件
- `AvatarTextPrimitive`: 文本组件
- `AvatarIconPrimitive`: 图标容器组件
- `AvatarGroupPrimitive`: 头像组容器组件
- `AvatarHeaderPrimitive`: 头像标题容器组件
- `AvatarNamePrimitive`: 名称组件
- `AvatarTimePrimitive`: 时间组件

如需更灵活的定制，可以直接使用这些原语组件。
