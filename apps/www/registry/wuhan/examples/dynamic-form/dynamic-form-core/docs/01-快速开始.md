# 动态表单快速开始

## 5 分钟上手

### 第一步：引入组件

```tsx
import { DynamicForm, type FormSchema } from "./dynamic-form-core";
```

### 第二步：定义 Schema

```tsx
const schema: FormSchema = {
  title: "我的表单",
  fields: [
    {
      name: "username",
      label: "用户名",
      type: "input",
      required: true,
    },
  ],
};
```

### 第三步：使用组件

```tsx
<DynamicForm
  schema={schema}
  onFinish={(values) => console.log(values)}
/>
```

## 常见场景

### 场景 1: 添加验证

```tsx
import * as z from "zod";

const validateSchema = z.object({
  username: z.string().min(3, "至少 3 个字符"),
});

<DynamicForm schema={schema} validateSchema={validateSchema} />
```

### 场景 2: 使用实例方法

```tsx
const formRef = useRef<DynamicFormRef>(null);

// 获取值
formRef.current?.getFieldsValue();

// 验证
await formRef.current?.validateFields();

// 提交
await formRef.current?.submit();
```

### 场景 3: 只读展示

```tsx
<DynamicForm
  schema={schema}
  initialValues={data}
  readonly={true}
  showActions={false}
/>
```

### 场景 4: 监听变化

```tsx
<DynamicForm
  schema={schema}
  onValuesChange={(values) => {
    console.log("表单变化:", values);
  }}
/>
```

## 支持的字段类型

| 类型 | 说明 | 必需属性 |
|------|------|----------|
| input | 文本输入 | - |
| textarea | 多行文本 | - |
| select | 下拉选择 | options |
| radio | 单选按钮 | options |
| checkbox | 复选框 | - |
| switch | 开关 | - |
| slider | 滑块 | range |
| number | 数字输入 | - |

## 完整配置示例

```tsx
const schema: FormSchema = {
  title: "完整示例",
  description: "这是一个完整的表单示例",
  fields: [
    // 文本输入
    {
      name: "name",
      label: "姓名",
      type: "input",
      placeholder: "请输入姓名",
      required: true,
      description: "您的真实姓名",
    },
    
    // 多行文本
    {
      name: "bio",
      label: "简介",
      type: "textarea",
      placeholder: "介绍一下自己...",
    },
    
    // 下拉选择
    {
      name: "city",
      label: "城市",
      type: "select",
      options: [
        { value: "bj", label: "北京" },
        { value: "sh", label: "上海" },
      ],
      defaultValue: "bj",
    },
    
    // 单选按钮
    {
      name: "gender",
      label: "性别",
      type: "radio",
      options: [
        { value: "male", label: "男" },
        { value: "female", label: "女" },
      ],
      orientation: "horizontal",
    },
    
    // 开关
    {
      name: "subscribe",
      label: "订阅通知",
      type: "switch",
      defaultValue: false,
    },
    
    // 滑块
    {
      name: "age",
      label: "年龄",
      type: "slider",
      range: { min: 0, max: 100, step: 1 },
      defaultValue: 25,
    },
    
    // 数字输入
    {
      name: "count",
      label: "数量",
      type: "number",
      min: 0,
      max: 999,
      step: 1,
    },
    
    // 复选框
    {
      name: "agree",
      label: "同意条款",
      type: "checkbox",
      required: true,
    },
  ],
};
```

## 故障排查

### 问题：表单不显示

**原因**：Schema 配置错误或字段缺少必需属性

**解决**：检查 Schema 配置，确保每个字段都有 `name`、`label`、`type`

### 问题：验证不生效

**原因**：未传入 `validateSchema` 或字段名不匹配

**解决**：确保 Zod Schema 的字段名与表单字段名一致

### 问题：选择类字段显示异常

**原因**：缺少 `options` 配置

**解决**：为 select、radio 类型添加 `options` 数组

### 问题：只读模式显示 value 而不是 label

**原因**：options 中没有对应值的选项

**解决**：确保 options 包含当前值对应的选项

## 更多帮助

- 完整文档：查看 [02-完整文档.md](./02-完整文档.md)
- 示例代码：查看 `../example.tsx`
- 实现细节：查看 [03-实现总结.md](./03-实现总结.md)
